(this["webpackJsonpmovies-project"]=this["webpackJsonpmovies-project"]||[]).push([[0],[,,,function(e,t,n){e.exports={"top-bar":"MainNavigation_top-bar__33niE",nav:"MainNavigation_nav__3NDoE",underline:"MainNavigation_underline__dAYH8"}},function(e,t,n){e.exports={"movie-container":"MovieDetails_movie-container__1JNRI",info:"MovieDetails_info__G_UDI","info-sections":"MovieDetails_info-sections__NB2Gh",message:"MovieDetails_message__3NIMB",msg:"MovieDetails_msg__jpLPp"}},,,function(e,t,n){e.exports={section:"MoviesList_section__1uIV3",list:"MoviesList_list__2Jvt8","load-btn":"MoviesList_load-btn__BfPzU",msg:"MoviesList_msg__2n6jS"}},function(e,t,n){e.exports={"show-genres":"Filters_show-genres__1XKdY",rotate:"Filters_rotate__2J_5Y",filters:"Filters_filters__3zsL-",selected:"Filters_selected__35Maa"}},,,,function(e,t,n){e.exports={backdrop:"Modal_backdrop__1VYmU",modal:"Modal_modal__1wNAK"}},function(e,t,n){e.exports={input:"SearchInput_input__GRqrF","auto-box":"SearchInput_auto-box__ro14I"}},function(e,t,n){e.exports={"movie-item":"Movie_movie-item__2KnKO",btn:"Movie_btn__1q6Cd"}},,,function(e,t,n){e.exports={loader:"LoadingSpinner_loader__3ER_Y",load8:"LoadingSpinner_load8__35q7l"}},,,,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),i=n(5),s=n.n(i),r=(n(21),n(15)),o=n(2),l=n(3),j=n.n(l),d="https://api.themoviedb.org/3",u="282f63039879e23307f585741fbb6e92",b=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),r=s[0],l=s[1];return{fetchData:Object(c.useCallback)((function(e,t){a(!0),l(null),fetch(e).then((function(e){return e.json()})).then((function(e){a(!1),t(e)})).catch((function(e){a(!1),l(e)}))}),[]),isLoading:n,error:r,setIsLoading:a}},m=n(16),O=n(17),h=n.n(O),f=n(0),p=function(){return Object(f.jsx)("div",{className:h.a.loader})},v=n(11),_=n(12),x=n.n(_),g=function(e){return Object(f.jsx)("div",{className:x.a.backdrop,onClick:e.onClick})},y=function(e){var t="".concat(x.a.modal," ").concat(e.className?e.className:"");return Object(f.jsx)("div",{className:t,children:e.children})},N=function(e){var t=document.getElementById("overlays");return Object(f.jsxs)(v.Fragment,{children:[Object(i.createPortal)(Object(f.jsx)(g,{onClick:e.onClose}),t),Object(i.createPortal)(Object(f.jsx)(y,{className:e.className,children:e.children}),t)]})},S=n(4),k=n.n(S),C=function(e){var t=e.id,n=e.type,a=e.onClose,i=b(),s=i.fetchData,r=i.isLoading,l=i.error,j=Object(c.useState)(null),O=Object(o.a)(j,2),h=O[0],v=O[1];if(Object(m.useEffect)((function(){s(function(e,t){return"".concat(d,"/").concat(e,"/").concat(t,"?api_key=").concat(u)}(n,t),(function(e){v(e)}))}),[t,n,s]),!h||r||l)return Object(f.jsxs)(N,{className:k.a.message,onClose:a,children:[!l&&Object(f.jsx)(p,{}),l&&Object(f.jsx)("p",{className:k.a.msg,children:"Movie could not be found"})]});console.log(h);var _,x,g=h.poster_path,y=h.title,S=h.name,C=h.tagline,M=h.overview,w=h.genres,L=h.release_date,D=h.production_companies,F=h.runtime,T=h.revenue,I=h.vote_average,E=h.first_air_date,B=h.number_of_seasons,G=h.number_of_episodes;return Object(f.jsxs)(N,{onClose:a,className:k.a["movie-container"],children:[Object(f.jsx)("img",{src:(_=500,x=g,"https://image.tmdb.org/t/p/w".concat(_,"/").concat(x)),width:"370px",alt:y||S}),Object(f.jsxs)("div",{className:k.a.info,children:[Object(f.jsx)("h2",{children:y||S}),Object(f.jsx)("h3",{children:C}),Object(f.jsx)("p",{children:M}),w&&Object(f.jsx)("span",{children:w.map((function(e){return e.name+" "}))}),D&&Object(f.jsx)("span",{children:D.map((function(e){return e.name+" "}))}),Object(f.jsxs)("div",{className:k.a["info-sections"],children:[Object(f.jsxs)("div",{children:[y?"Original Release":"First air date",Object(f.jsx)("span",{children:y?L:E})]}),y&&Object(f.jsxs)(c.Fragment,{children:[Object(f.jsxs)("div",{children:["Running Time: ",Object(f.jsxs)("span",{children:[F," minutes"]})]}),Object(f.jsxs)("div",{children:["Box Office: $",Object(f.jsx)("span",{children:0===T?"--":T})]})]}),S&&Object(f.jsxs)(c.Fragment,{children:[Object(f.jsxs)("div",{children:["Number of seasons: ",Object(f.jsx)("span",{children:B})]}),Object(f.jsxs)("div",{children:["Number of episodes: ",Object(f.jsx)("span",{children:G})]})]}),Object(f.jsxs)("div",{children:["Vote average: ",Object(f.jsx)("span",{children:I})]})]})]})]})},M=n(13),w=n.n(M),L=function(e){var t=e.displayType,n=e.placeholderText,a=b(),i=a.fetchData,s=a.isLoading,r=a.setIsLoading,l=Object(c.useState)(""),j=Object(o.a)(l,2),m=j[0],O=j[1],h=Object(c.useState)([]),p=Object(o.a)(h,2),v=p[0],_=p[1],x=Object(c.useState)(null),g=Object(o.a)(x,2),y=g[0],N=g[1],S=function(e,n){if("none"!==e){var c=t;"all"===t&&(c=n),N({id:e,type:c})}};return Object(c.useEffect)((function(){var e=t;"all"===t&&(e="multi");var n=setTimeout((function(){if(0!==m.trim().length){var t=function(e,t){return"".concat(d,"/search/").concat(e,"/?api_key=").concat(u,"&query=").concat(t)}(e,m);i(t,(function(e){if(0===e.results.length)_([{id:"none",name:"No match found"}]);else{var t=e.results.filter((function(e){return"person"!==e.media_type}));_(t.slice(0,7))}}))}else _([]),r(!1)}),350);return function(){return clearTimeout(n)}}),[m,t,i,r]),Object(c.useEffect)((function(){0!==m.trim().length?r(!0):r(!1)}),[m,r]),Object(f.jsxs)(c.Fragment,{children:[Object(f.jsx)("input",{className:w.a.input,type:"text",placeholder:n,value:m,onChange:function(e){return O(e.target.value)}}),""!==m.trim()&&Object(f.jsxs)("div",{className:w.a["auto-box"],children:[!s&&v.map((function(e){return Object(f.jsx)("span",{onClick:S.bind(null,e.id,e.type),children:e.title?e.title:e.name},"auto_".concat(e.id))})),s&&Object(f.jsx)("span",{children:"Searching..."})]}),y&&Object(f.jsx)(C,{id:y.id,type:y.type,onClose:function(){return N(null)}})]})},D=function(e){var t=e.onChangeType,n=e.displayType,c="movie";"all"===n&&(c=""),"tv"===n&&(c="series");var a="Search ".concat(c," by name");return Object(f.jsxs)("header",{className:j.a["top-bar"],children:[Object(f.jsx)("div",{children:Object(f.jsx)("h1",{children:"MoviesDB"})}),Object(f.jsxs)("nav",{className:j.a.nav,children:[Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{className:"movie"===n?j.a.underline:"",onClick:t.bind(null,"movie"),children:"Movies"}),Object(f.jsx)("li",{className:"tv"===n?j.a.underline:"",onClick:t.bind(null,"tv"),children:"Series"}),Object(f.jsx)("li",{className:"all"===n?j.a.underline:"",onClick:t.bind(null,"all"),children:"All"})]}),Object(f.jsx)(L,{placeholderText:a,displayType:n})]})]})},F=n(14),T=n.n(F),I=function(e){var t=e.data,n=e.onShowDetails;return Object(f.jsxs)("li",{className:T.a["movie-item"],onClick:function(){var e;t.media_type&&(e="movie"===t.media_type?"movie":"tv"),n(t.id,e)},children:[Object(f.jsx)("img",{src:"https://image.tmdb.org/t/p/w300/".concat(t.poster_path),alt:t.title}),Object(f.jsx)("div",{children:Object(f.jsx)("h2",{children:t.title?t.title:t.name})}),Object(f.jsxs)("span",{className:T.a.btn,children:[10*t.vote_average,Object(f.jsx)("span",{children:"%"})]})]})},E=Object(c.memo)(I),B=n(7),G=n.n(B),A=n.p+"static/media/down-arrow.474a217e.svg",R=n(8),J=n.n(R),Y=function(e){var t=e.genres,n=e.selectedGenreId,a=e.onSearchGender,i=Object(c.useState)(!1),s=Object(o.a)(i,2),r=s[0],l=s[1];return Object(f.jsxs)(c.Fragment,{children:[Object(f.jsxs)("div",{className:J.a["show-genres"],onClick:function(){return l((function(e){return!e}))},children:[Object(f.jsx)("img",{src:A,alt:"arrow-icon",className:r?J.a.rotate:""}),Object(f.jsx)("span",{children:"Search by genre"})]}),r&&Object(f.jsx)("ul",{className:J.a.filters,children:t.map((function(e){return Object(f.jsx)("li",{className:n===e.id?J.a.selected:"",onClick:a.bind(null,e.id),children:e.name},e.id)}))})]})},q=[{id:0,name:"All"},{id:"28",name:"Action"},{id:"35",name:"Comedy"},{id:"27",name:"Horror"},{id:"10749",name:"Romance"},{id:"9648",name:"Mystery"},{id:"878",name:"Science Fiction"},{id:"53",name:"Thriller"},{id:"18",name:"Drama"},{id:"99",name:"Documentary"},{id:"16",name:"Animation"}],K=!0,P=function(e){var t=e.moviesList,n=e.onFetchByGenre,a=e.displayType,i=e.isLoading,s=e.error,r=Object(c.useState)(1),l=Object(o.a)(r,2),j=l[0],d=l[1],u=Object(c.useState)(0),b=Object(o.a)(u,2),m=b[0],O=b[1],h=Object(c.useState)(null),v=Object(o.a)(h,2),_=v[0],x=v[1],g=Object(c.useCallback)((function(e,t){x({id:e,type:t||a})}),[a]);Object(c.useEffect)((function(){K?K=!1:d(1)}),[a,m]),Object(c.useEffect)((function(){return O(0)}),[a]);var y=q;return"tv"===a&&(y=y.filter((function(e){return"27"!==e.id&&"Science Fiction"!==e.name&&"Action"!==e.name}))),Object(f.jsxs)("section",{className:G.a.section,children:["all"!==a&&Object(f.jsx)(Y,{genres:y,onSearchGender:function(e){O(e),n(0===e?null:e)},selectedGenreId:m}),Object(f.jsx)("h2",{children:"Trending this week"}),i&&0===t.length&&Object(f.jsx)(p,{}),s&&Object(f.jsx)("p",{className:G.a.msg,children:"Something went wrong, please try again in a few moments"}),t.length>0&&!s&&Object(f.jsx)("ul",{className:G.a.list,children:t.map((function(e){return Object(f.jsx)(E,{data:e,onShowDetails:g},e.id)}))}),i&&t.length>0&&Object(f.jsx)(p,{}),"all"!==a&&0!==m&&Object(f.jsx)("button",{className:G.a["load-btn"],onClick:function(){d((function(e){return e+1})),n(m,j+1)},children:"Load more movies"}),_&&Object(f.jsx)(C,{id:_.id,type:_.type,onClose:function(){return x(null)}})]})},U=n.p+"static/media/main-background.9b7c41ba.jpg";var V=function(){var e=b(),t=e.fetchData,n=e.isLoading,a=e.error,i=Object(c.useState)([]),s=Object(o.a)(i,2),l=s[0],j=s[1],m=Object(c.useState)("movie"),O=Object(o.a)(m,2),h=O[0],p=O[1],v=Object(c.useCallback)((function(e,n){var c;c=e?function(e,t,n){var c=n?"&page=".concat(n):"";return"".concat(d,"/discover/").concat(e,"?api_key=").concat(u,"&with_genres=").concat(t).concat(c)}(h,e,n):function(e){return"".concat(d,"/trending/").concat(e,"/week?api_key=").concat(u)}(h),t(c,(function(e){j(n?function(t){return[].concat(Object(r.a)(t),Object(r.a)(e.results))}:e.results)}))}),[h,t]);return Object(c.useEffect)((function(){v()}),[h,v]),Object(f.jsxs)(c.Fragment,{children:[Object(f.jsx)("img",{src:U,className:"background",alt:"background"}),Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(D,{onChangeType:p,displayType:h}),Object(f.jsx)(P,{moviesList:l,isLoading:n,error:a,onFetchByGenre:v,displayType:h})]})]})};s.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(V,{})}),document.getElementById("root"))}],[[23,1,2]]]);
//# sourceMappingURL=main.e4ade11b.chunk.js.map