(this["webpackJsonpmovies-project"]=this["webpackJsonpmovies-project"]||[]).push([[0],[,,,,function(e,n,t){e.exports={"top-bar":"MainNavigation_top-bar__33niE",nav:"MainNavigation_nav__3NDoE",underline:"MainNavigation_underline__dAYH8"}},function(e,n,t){e.exports={"movie-container":"MovieDetails_movie-container__1JNRI",info:"MovieDetails_info__G_UDI","info-sections":"MovieDetails_info-sections__NB2Gh",message:"MovieDetails_message__3NIMB",msg:"MovieDetails_msg__jpLPp"}},,,function(e,n,t){e.exports={section:"MoviesList_section__1uIV3",list:"MoviesList_list__2Jvt8","load-btn":"MoviesList_load-btn__BfPzU",msg:"MoviesList_msg__2n6jS"}},function(e,n,t){e.exports={"show-genres":"Filters_show-genres__1XKdY",rotate:"Filters_rotate__2J_5Y",filters:"Filters_filters__3zsL-",selected:"Filters_selected__35Maa"}},,,,function(e,n,t){e.exports={backdrop:"Modal_backdrop__1VYmU",modal:"Modal_modal__1wNAK"}},function(e,n,t){e.exports={input:"SearchInput_input__GRqrF","auto-box":"SearchInput_auto-box__ro14I"}},function(e,n,t){e.exports={"movie-item":"Movie_movie-item__2KnKO",btn:"Movie_btn__1q6Cd"}},,function(e,n,t){e.exports={loader:"LoadingSpinner_loader__3ER_Y",load8:"LoadingSpinner_load8__35q7l"}},,,,function(e,n,t){},,function(e,n,t){"use strict";t.r(n);var a=t(1),c=t.n(a),i=t(6),s=t.n(i),r=(t(21),t(2)),o=t(16),l=t(3),d=t(4),j=t.n(d),u="https://api.themoviedb.org/3",m="282f63039879e23307f585741fbb6e92",b=function(){var e=Object(a.useState)(!1),n=Object(r.a)(e,2),t=n[0],c=n[1],i=Object(a.useState)(null),s=Object(r.a)(i,2),o=s[0],l=s[1];return{fetchData:Object(a.useCallback)((function(e,n){c(!0),l(null),fetch(e).then((function(e){return e.json()})).then((function(e){c(!1),n(e)})).catch((function(e){c(!1),l(e)}))}),[]),isLoading:t,error:o,setIsLoading:c}},p=t(17),O=t.n(p),h=t(0),_=function(){return Object(h.jsx)("div",{className:O.a.loader})},f=t(12),x=t(13),v=t.n(x),g=function(e){return Object(h.jsx)("div",{className:v.a.backdrop,onClick:e.onClick})},y=function(e){var n="".concat(v.a.modal," ").concat(e.className?e.className:"");return Object(h.jsx)("div",{className:n,children:e.children})},N=function(e){var n=document.getElementById("overlays");return Object(h.jsxs)(f.Fragment,{children:[Object(i.createPortal)(Object(h.jsx)(g,{onClick:e.onClose}),n),Object(i.createPortal)(Object(h.jsx)(y,{className:e.className,children:e.children}),n)]})},E=t(5),S=t.n(E),C=function(e){var n=e.id,t=e.type,c=e.onClose,i=b(),s=i.fetchData,o=i.isLoading,l=i.error,d=Object(a.useState)(null),j=Object(r.a)(d,2),p=j[0],O=j[1];if(Object(a.useEffect)((function(){s(function(e,n){return"".concat(u,"/").concat(e,"/").concat(n,"?api_key=").concat(m)}(t,n),(function(e){O(e)}))}),[n,t,s]),!p||o||l)return Object(h.jsxs)(N,{className:S.a.message,onClose:c,children:[!l&&Object(h.jsx)(_,{}),l&&Object(h.jsx)("p",{className:S.a.msg,children:"Movie could not be found"})]});var f,x,v=p.poster_path,g=p.title,y=p.name,E=p.tagline,C=p.overview,T=p.genres,k=p.release_date,M=p.production_companies,I=p.runtime,D=p.revenue,w=p.vote_average,L=p.first_air_date,F=p.number_of_seasons,P=p.number_of_episodes;return Object(h.jsxs)(N,{onClose:c,className:S.a["movie-container"],children:[Object(h.jsx)("img",{src:(f=500,x=v,"https://image.tmdb.org/t/p/w".concat(f,"/").concat(x)),width:"370px",alt:g||y}),Object(h.jsxs)("div",{className:S.a.info,children:[Object(h.jsx)("h2",{children:g||y}),Object(h.jsx)("h3",{children:E}),Object(h.jsx)("p",{children:C}),T&&Object(h.jsx)("span",{children:T.map((function(e){return e.name+" "}))}),M&&Object(h.jsx)("span",{children:M.map((function(e){return e.name+" "}))}),Object(h.jsxs)("div",{className:S.a["info-sections"],children:[Object(h.jsxs)("div",{children:[g?"Original Release":"First air date",Object(h.jsx)("span",{children:g?k:L})]}),g&&Object(h.jsxs)(a.Fragment,{children:[Object(h.jsxs)("div",{children:["Running Time: ",Object(h.jsxs)("span",{children:[I," minutes"]})]}),Object(h.jsxs)("div",{children:["Box Office: $",Object(h.jsx)("span",{children:0===D?"--":D})]})]}),y&&Object(h.jsxs)(a.Fragment,{children:[Object(h.jsxs)("div",{children:["Number of seasons: ",Object(h.jsx)("span",{children:F})]}),Object(h.jsxs)("div",{children:["Number of episodes: ",Object(h.jsx)("span",{children:P})]})]}),Object(h.jsxs)("div",{children:["Vote average: ",Object(h.jsx)("span",{children:w})]})]})]})]})},T=t(14),k=t.n(T),M=function(e){var n=e.displayType,t=e.placeholderText,c=b(),i=c.fetchData,s=c.isLoading,o=c.setIsLoading,l=Object(a.useState)(""),d=Object(r.a)(l,2),j=d[0],p=d[1],O=Object(a.useState)([]),_=Object(r.a)(O,2),f=_[0],x=_[1],v=Object(a.useState)(null),g=Object(r.a)(v,2),y=g[0],N=g[1],E=function(e,t){if("none"!==e){var a=n;"all"===n&&(a=t),N({id:e,type:a})}};return Object(a.useEffect)((function(){var e=n;"all"===n&&(e="multi");var t=setTimeout((function(){if(0!==j.trim().length){var n=function(e,n){return"".concat(u,"/search/").concat(e,"?api_key=").concat(m,"&query=").concat(n)}(e,j);i(n,(function(e){if(0===e.results.length)x([{id:"none",name:"No match found"}]);else{var n=e.results.filter((function(e){return"person"!==e.media_type}));x(n.slice(0,7))}}))}else x([]),o(!1)}),350);return function(){return clearTimeout(t)}}),[j,n,i,o]),Object(a.useEffect)((function(){0!==j.trim().length?o(!0):o(!1)}),[j,o]),Object(h.jsxs)(a.Fragment,{children:[Object(h.jsx)("input",{className:k.a.input,type:"text",placeholder:t,value:j,onChange:function(e){return p(e.target.value)}}),""!==j.trim()&&Object(h.jsxs)("div",{className:k.a["auto-box"],children:[!s&&f.map((function(e){return Object(h.jsx)("span",{onClick:E.bind(null,e.id,e.media_type),children:e.title?e.title:e.name},"auto_".concat(e.id))})),s&&Object(h.jsx)("span",{children:"Searching..."})]}),y&&Object(h.jsx)(C,{id:y.id,type:y.type,onClose:function(){return N(null)}})]})},I=function(e){var n=e.onChangeType,t=e.displayType,a="movie";"all"===t&&(a=""),"tv"===t&&(a="series");var c="Search ".concat(a," by name");return Object(h.jsxs)("header",{className:j.a["top-bar"],children:[Object(h.jsx)("div",{children:Object(h.jsx)("h1",{children:"MoviesDB"})}),Object(h.jsxs)("nav",{className:j.a.nav,children:[Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{className:"movie"===t?j.a.underline:"",onClick:n.bind(null,"movie"),children:"Movies"}),Object(h.jsx)("li",{className:"tv"===t?j.a.underline:"",onClick:n.bind(null,"tv"),children:"Series"}),Object(h.jsx)("li",{className:"all"===t?j.a.underline:"",onClick:n.bind(null,"all"),children:"All"})]}),Object(h.jsx)(M,{placeholderText:c,displayType:t})]})]})},D=Object(a.memo)(I),w=t(15),L=t.n(w),F=function(e){var n=e.data,t=e.onShowDetails;return Object(h.jsxs)("li",{className:L.a["movie-item"],onClick:function(){var e;n.media_type&&(e="movie"===n.media_type?"movie":"tv"),t(n.id,e)},children:[Object(h.jsx)("img",{src:"https://image.tmdb.org/t/p/w300/".concat(n.poster_path),alt:n.title}),Object(h.jsx)("div",{children:Object(h.jsx)("h2",{children:n.title?n.title:n.name})}),Object(h.jsxs)("span",{className:L.a.btn,children:[10*n.vote_average,Object(h.jsx)("span",{children:"%"})]})]})},P=Object(a.memo)(F),A=t(8),G=t.n(A),R=t.p+"static/media/down-arrow.474a217e.svg",B=t(9),Y=t.n(B),J=[{id:"any",name:"All"},{id:"28",name:"Action"},{id:"35",name:"Comedy"},{id:"27",name:"Horror"},{id:"10749",name:"Romance"},{id:"9648",name:"Mystery"},{id:"878",name:"Science Fiction"},{id:"53",name:"Thriller"},{id:"18",name:"Drama"},{id:"99",name:"Documentary"},{id:"16",name:"Animation"}],q=function(e){var n=e.selectedGenreId,t=e.onSearchGenre,c=e.displayType,i=Object(a.useState)(!1),s=Object(r.a)(i,2),o=s[0],l=s[1],d=J;return"tv"===c&&(d=d.filter((function(e){return"27"!==e.id&&"Science Fiction"!==e.name&&"Action"!==e.name}))),Object(h.jsxs)(a.Fragment,{children:[Object(h.jsxs)("div",{className:Y.a["show-genres"],onClick:function(){return l((function(e){return!e}))},children:[Object(h.jsx)("img",{src:R,alt:"arrow-icon",className:o?Y.a.rotate:""}),Object(h.jsx)("span",{children:"Search by genre"})]}),o&&Object(h.jsx)("ul",{className:Y.a.filters,children:d.map((function(e){return Object(h.jsx)("li",{className:n===e.id?Y.a.selected:"",onClick:t.bind(null,e.id),children:e.name},e.id)}))})]})},K=Object(a.memo)(q),U=function(e){var n=e.moviesList,t=e.onFetchMore,c=e.displayType,i=e.isFetching,s=e.loading,o=e.error,l=e.genreId,d=e.onSelectGenre,j=Object(a.useState)(null),u=Object(r.a)(j,2),m=u[0],b=u[1],p=Object(a.useCallback)((function(e,n){b({id:e,type:n||c})}),[c]),O=Object(a.useCallback)((function(e){d(e)}),[d]);return Object(h.jsxs)("section",{className:G.a.section,children:["all"!==c&&Object(h.jsx)(K,{onSearchGenre:O,selectedGenreId:l,displayType:c}),Object(h.jsx)("h2",{children:"Trending this week"}),s&&i&&Object(h.jsx)(_,{}),!i&&o&&Object(h.jsx)("p",{className:G.a.msg,children:"Something went wrong, please try again in a few moments"}),!s&&!o&&Object(h.jsx)("ul",{className:G.a.list,children:n.map((function(e){return Object(h.jsx)(P,{data:e,onShowDetails:p},e.id)}))}),!s&&i&&Object(h.jsx)(_,{}),!i&&"all"!==c&&Object(h.jsx)("button",{className:G.a["load-btn"],onClick:t,children:"Load more movies"}),m&&Object(h.jsx)(C,{id:m.id,type:m.type,onClose:function(){return b(null)}})]})},V=t.p+"static/media/main-background.9b7c41ba.jpg",z={mediaElements:[],nextPage:1,mediaType:"movie",genreId:"any",loading:!0},H=function(e,n){switch(n.type){case"SELECT_TYPE":return Object(l.a)(Object(l.a)({},e),{},{mediaType:n.mediaType,genreId:"any",loading:!0,nextPage:1});case"SELECT_GENRE":return Object(l.a)(Object(l.a)({},e),{},{genreId:n.genreId,loading:!0,nextPage:1});case"SET_MEDIA":return Object(l.a)(Object(l.a)({},e),{},{mediaElements:n.mediaElements,loading:!1,nextPage:e.nextPage+1});case"ADD_MEDIA":return Object(l.a)(Object(l.a)({},e),{},{mediaElements:[].concat(Object(o.a)(e.mediaElements),Object(o.a)(n.mediaElements)),nextPage:e.nextPage+1});default:return e}};var X=function(){var e=b(),n=e.fetchData,t=e.isLoading,c=e.error,i=Object(a.useReducer)(H,z),s=Object(r.a)(i,2),o=s[0],l=s[1],d=o.mediaType,j=o.mediaElements,p=o.nextPage,O=o.genreId,_=o.loading,f=Object(a.useCallback)((function(e){e!==o.mediaType&&l({type:"SELECT_TYPE",mediaType:e})}),[o.mediaType]),x=Object(a.useCallback)((function(e){l({type:"SELECT_GENRE",genreId:e})}),[]),v=Object(a.useCallback)((function(e){var t,a;"all"===d?(a=d,t="".concat(u,"/trending/").concat(a,"/week?api_key=").concat(m)):t=function(e,n,t){var a=t?"&page=".concat(t):"&page=1",c=n?"&with_genres=".concat(n):"";return"".concat(u,"/discover/").concat(e,"?api_key=").concat(m).concat(c).concat(a)}(d,"any"===O?null:O,e||null),n(t,(function(n){var t;e?(t=n.results,l({type:"ADD_MEDIA",mediaElements:t})):function(e){l({type:"SET_MEDIA",mediaElements:e})}(n.results)}))}),[d,n,O]);return Object(a.useEffect)((function(){v()}),[d,O,v]),Object(h.jsxs)(a.Fragment,{children:[Object(h.jsx)("img",{src:V,className:"background",alt:"background"}),Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)(D,{onChangeType:f,displayType:d}),Object(h.jsx)(U,{moviesList:j,loading:_,isFetching:t,error:c,genreId:O,displayType:d,onFetchMore:v.bind(null,p),onSelectGenre:x})]})]})};s.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(X,{})}),document.getElementById("root"))}],[[23,1,2]]]);
//# sourceMappingURL=main.e55ee4b0.chunk.js.map